<Window x:Class="GameEngine.Editor.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:avalonDock="https://github.com/Dirkster99/AvalonDock"
        xmlns:local="clr-namespace:GameEngine.Editor"
        mc:Ignorable="d"
        Title="Game Engine Editor - .NET 9 + C++20" Height="900" Width="1600"
        Loaded="Window_Loaded" Closing="Window_Closing">
    <DockPanel>
        <!-- Menu Bar -->
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_File">
                <MenuItem Header="_New Scene" Click="NewScene_Click"/>
                <MenuItem Header="_Open Scene..." Click="OpenScene_Click"/>
                <MenuItem Header="_Save Scene" Click="SaveScene_Click"/>
                <Separator/>
                <MenuItem Header="_Exit" Click="Exit_Click"/>
            </MenuItem>
            <MenuItem Header="_Edit">
                <MenuItem Header="_Editor Mode" IsCheckable="True" IsChecked="{Binding IsEditorMode}" Click="ToggleEditorMode_Click"/>
                <Separator/>
                <MenuItem Header="_Generate Terrain" Click="GenerateTerrain_Click"/>
            </MenuItem>
            <MenuItem Header="_View">
                <MenuItem Header="_Properties" Click="ToggleProperties_Click"/>
                <MenuItem Header="_Hierarchy" Click="ToggleHierarchy_Click"/>
                <MenuItem Header="_Console" Click="ToggleConsole_Click"/>
            </MenuItem>
            <MenuItem Header="_Help">
                <MenuItem Header="_About" Click="About_Click"/>
            </MenuItem>
        </Menu>

        <!-- Tool Bar -->
        <ToolBar DockPanel.Dock="Top">
            <Button Content="Play" Click="Play_Click" Padding="5,2"/>
            <Button Content="Pause" Click="Pause_Click" Padding="5,2"/>
            <Separator/>
            <Button Content="Editor Mode" Click="ToggleEditorMode_Click" Padding="5,2"/>
            <Separator/>
            <TextBlock Text="Camera: " VerticalAlignment="Center" Margin="5,0"/>
            <TextBlock x:Name="CameraPositionText" Text="(0, 0, 0)" VerticalAlignment="Center" Margin="5,0"/>
            <Separator/>
            <TextBlock Text="FPS: " VerticalAlignment="Center" Margin="5,0"/>
            <TextBlock x:Name="FpsText" Text="60" VerticalAlignment="Center" Margin="5,0"/>
        </ToolBar>

        <!-- Status Bar -->
        <StatusBar DockPanel.Dock="Bottom">
            <StatusBarItem>
                <TextBlock x:Name="StatusText" Text="Ready"/>
            </StatusBarItem>
        </StatusBar>

        <!-- Main Content Area with AvalonDock -->
        <avalonDock:DockingManager x:Name="DockManager">
            <avalonDock:LayoutRoot>
                <avalonDock:LayoutPanel Orientation="Horizontal">
                    <!-- Left Panel - Hierarchy -->
                    <avalonDock:LayoutAnchorablePane DockWidth="250">
                        <avalonDock:LayoutAnchorable Title="Hierarchy" CanClose="False">
                            <TreeView x:Name="HierarchyTree">
                                <TreeViewItem Header="Scene Root" IsExpanded="True">
                                    <TreeViewItem Header="Camera"/>
                                    <TreeViewItem Header="Terrain"/>
                                    <TreeViewItem Header="Lighting"/>
                                </TreeViewItem>
                            </TreeView>
                        </avalonDock:LayoutAnchorable>
                    </avalonDock:LayoutAnchorablePane>

                    <!-- Center Panel - Viewport -->
                    <avalonDock:LayoutDocumentPane>
                        <avalonDock:LayoutDocument Title="Viewport" CanClose="False">
                            <Grid x:Name="ViewportContainer">
                                <WindowsFormsHost x:Name="EngineHost">
                                    <local:EnginePanel x:Name="EnginePanel"/>
                                </WindowsFormsHost>
                                <TextBlock Text="3D Viewport" 
                                         HorizontalAlignment="Left" 
                                         VerticalAlignment="Top"
                                         Margin="10"
                                         Foreground="White"
                                         FontWeight="Bold"
                                         FontSize="14"/>
                            </Grid>
                        </avalonDock:LayoutDocument>
                    </avalonDock:LayoutDocumentPane>

                    <!-- Right Panel - Properties -->
                    <avalonDock:LayoutAnchorablePane DockWidth="300">
                        <avalonDock:LayoutAnchorable Title="Properties" CanClose="False">
                            <ScrollViewer>
                                <StackPanel Margin="5">
                                    <GroupBox Header="Transform" Margin="0,5">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Text="Position X:" Grid.Row="0" Grid.Column="0" Margin="2"/>
                                            <TextBox x:Name="PositionX" Grid.Row="0" Grid.Column="1" Margin="2" Text="0"/>
                                            <TextBlock Text="Position Y:" Grid.Row="1" Grid.Column="0" Margin="2"/>
                                            <TextBox x:Name="PositionY" Grid.Row="1" Grid.Column="1" Margin="2" Text="0"/>
                                            <TextBlock Text="Position Z:" Grid.Row="2" Grid.Column="0" Margin="2"/>
                                            <TextBox x:Name="PositionZ" Grid.Row="2" Grid.Column="1" Margin="2" Text="0"/>
                                        </Grid>
                                    </GroupBox>
                                    <GroupBox Header="Camera Settings" Margin="0,5">
                                        <StackPanel>
                                            <CheckBox Content="Free Camera" IsChecked="True" Margin="2"/>
                                            <TextBlock Text="Speed:" Margin="2"/>
                                            <Slider Minimum="1" Maximum="50" Value="10" Margin="2"/>
                                        </StackPanel>
                                    </GroupBox>
                                    <GroupBox Header="Voxel Tools" Margin="0,5">
                                        <StackPanel>
                                            <Button Content="Place Block" Click="PlaceBlock_Click" Margin="2"/>
                                            <Button Content="Remove Block" Click="RemoveBlock_Click" Margin="2"/>
                                            <ComboBox Margin="2" SelectedIndex="0">
                                                <ComboBoxItem Content="Grass"/>
                                                <ComboBoxItem Content="Dirt"/>
                                                <ComboBoxItem Content="Stone"/>
                                                <ComboBoxItem Content="Sand"/>
                                            </ComboBox>
                                        </StackPanel>
                                    </GroupBox>
                                </StackPanel>
                            </ScrollViewer>
                        </avalonDock:LayoutAnchorable>
                    </avalonDock:LayoutAnchorablePane>
                </avalonDock:LayoutPanel>

                <!-- Bottom Panel - Console -->
                <avalonDock:LayoutAnchorablePaneGroup DockHeight="200" Orientation="Vertical">
                    <avalonDock:LayoutAnchorablePane>
                        <avalonDock:LayoutAnchorable Title="Console" CanClose="False">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <TextBox x:Name="ConsoleOutput" 
                                       Grid.Row="0"
                                       IsReadOnly="True" 
                                       VerticalScrollBarVisibility="Auto"
                                       FontFamily="Consolas"
                                       Background="#1E1E1E"
                                       Foreground="#D4D4D4"/>
                                <TextBox x:Name="ConsoleInput" 
                                       Grid.Row="1"
                                       KeyDown="ConsoleInput_KeyDown"
                                       FontFamily="Consolas"/>
                            </Grid>
                        </avalonDock:LayoutAnchorable>
                    </avalonDock:LayoutAnchorablePane>
                </avalonDock:LayoutAnchorablePaneGroup>
            </avalonDock:LayoutRoot>
        </avalonDock:DockingManager>
    </DockPanel>
</Window>
